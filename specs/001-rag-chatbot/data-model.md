# Data Model for RAG Chatbot System

**Feature Branch**: `001-rag-chatbot` | **Date**: 2025-11-30

## Key Entities

### 1. Markdown File Content

- **Description**: Represents the raw text extracted from markdown files within the `book_source/docs/` directory.
- **Attributes**:
    - `id`: Unique identifier for the content chunk (e.g., hash of content, or sequential ID).
    - `text`: The actual text content of a segment of a markdown file.
    - `source_file`: Path to the original markdown file.
    - `chunk_id`: Identifier for the specific chunk within the source file (if content is chunked).
    - `metadata`: Additional information like chapter title, module, etc.

### 2. Embedding

- **Description**: A fixed-size numerical vector representation of a `Markdown File Content` chunk, generated by FastEmbed.
- **Attributes**:
    - `vector`: A 384-dimensional float array representing the embedding.
    - `content_id`: Foreign key linking to the `Markdown File Content` (or directly embedding the `text` and `source_file` as payload).

### 3. Qdrant Collection "physical_ai_book"

- **Description**: The dedicated collection in Qdrant Cloud for storing `Embedding` vectors and their associated `Markdown File Content` metadata as payload.
- **Attributes** (within each point/vector):
    - `id`: Unique ID for the vector (same as `id` from `Markdown File Content` or generated by Qdrant).
    - `vector`: The 384-dimensional embedding vector.
    - `payload`:
        - `text`: Original text chunk.
        - `source_file`: Path to the markdown file.
        - `chapter_title`: (Optional) Title of the chapter.
        - `module`: (Optional) Module name.

### 4. User Query

- **Description**: Text input provided by the user to the chatbot, either typed directly or selected from the Docusaurus book.
- **Attributes**:
    - `query_text`: The actual text of the user's question.
    - `is_selection_based`: Boolean indicating if the query originated from selected text.
    - `selected_text_context`: (Optional) The text that was selected by the user, if `is_selection_based` is true.

### 5. LLM Response

- **Description**: The natural language answer generated by the Google Gemini API based on the RAG process (retrieved context + user query).
- **Attributes**:
    - `response_text`: The generated answer.
    - `source_citations`: List of references to the `Markdown File Content` chunks used to generate the response (e.g., `source_file`, `chunk_id`, relevant text snippet).
